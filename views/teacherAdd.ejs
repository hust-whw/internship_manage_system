<!DOCTYPE html>
<html lang="en">

	<head>
	
		<!-- Basic -->
    	<meta charset="UTF-8" />

		<title>添加教师</title>

		<!-- Mobile Metas -->
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- Import google fonts -->
         <!--<link href='http://fonts.useso.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'>-->
        
		<!-- Favicon and touch icons -->
		<link rel="shortcut icon" href="/assets/ico/favicon.ico" type="image/x-icon" />
		<link rel="apple-touch-icon" href="/assets/ico/apple-touch-icon.png" />
		<link rel="apple-touch-icon" sizes="57x57" href="/assets/ico/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/assets/ico/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="/assets/ico/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="/assets/ico/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="/assets/ico/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/assets/ico/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="/assets/ico/apple-touch-icon-152x152.png" />
		

		<%- include('components/common-css') %>
		
	</head>
	
	<body>
	
	
		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">
				<!-- Navbar Action -->
				<ul class="nav navbar-nav navbar-actions navbar-left">
					<li class="visible-md visible-lg"><a href="#" id="main-menu-toggle"><i class="fa fa-th-large"></i></a></li>
					<li class="visible-xs visible-sm"><a href="#" id="sidebar-menu"><i class="fa fa-navicon"></i></a></li>			
				</ul>
				<!-- Navbar Left -->
				
				<div class="navbar-left">
					<!-- Search Form -->					
					<!--<form class="search navbar-form">
						<div class="input-group input-search">
							<input type="text" class="form-control bk-radius" name="q" id="q" placeholder="Search...">
							<span class="input-group-btn">
								<button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
							</span>
						</div>						
					</form>-->

				</div>
				<!-- Navbar Right -->
				<div class="navbar-right">					
					<%- include('components/notification') %>
				</div>
				<!-- End Navbar Right -->
			</div>		
		</div>
		<!-- End: Header -->
		
		<!-- Start: Content -->
		<div class="container-fluid content">	
			<div class="row">
			
				<%- include('components/side-bar') %>					
		
				<!-- Main Page -->
				<div class="main ">
					<!-- Page Header -->
					<div class="page-header">
						<div class="pull-left">
							<ol class="breadcrumb visible-sm visible-md visible-lg">								
								<li><a href="#"><i class="icon fa fa-home"></i>主页</a></li>
								<li><a href="#"><i class="fa fa-list-alt"></i>教师管理</a></li>
								<li class="active"><i class="fa fa-indent"></i>新建教师</li>
							</ol>						
						</div>
						<div class="pull-right">
							<a class="btn btn-success"  href="/teacher/list;" style="margin-top:10px;margin-right:10px;"><i class="fa fa-rss"></i>返回教师列表</a> 
						</div>					
					</div>
					<!-- End Page Header -->
					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<div class="panel panel-default bk-bg-white">
								<div class="panel-heading bk-bg-white">
									<h6><i class="fa fa-indent red"></i>新建教师</h6>							
									<div class="panel-actions">
										<a href="#" class="btn-minimize"><i class="fa fa-caret-up"></i></a>

									</div>
								</div>
								<div class="panel-body form-horizontal">
									
										<!-- <div class="form-group">
											<label class="col-md-3 control-label">编号：</label>
											<div class="col-md-9">
												<input type="text" id="id" name="text-input" class="form-control" placeholder="000001">
											</div>
										</div> -->
										
										
										
										<div class="form-group">
											<label class="col-md-3 control-label" for="email-input">工号：</label>
											<div class="col-md-9">
												<input type="email" id="number" name="email-input" class="form-control" placeholder="M201571877">
												
											</div>
										</div>

										<div class="form-group">
											<label class="col-md-3 control-label" for="text-input">姓名：</label>
											<div class="col-md-9">
												<input type="text" id="name" name="text-input" class="form-control" placeholder="" >
												
											</div>
										</div>
										
										
										<div class="form-group">
											<label class="col-lg-6 col-md-6 col-sm-6 col-xs-6 control-label" for="email-input"></label>
											<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 ">
												<button  class="tijiao bk-margin-10 btn btn-primary btn-lg" onclick="addNewTeacher()">提交</button>
												
											</div>
										</div>
										


										<br>
									
								</div>							
							</div>


						</div>

					</div>
					
				
				</div>
				<!-- End Main Page -->			
		
				<!-- Footer -->

				<!-- End Footer -->
			
			</div>
		</div><!--/container-->
			
		
		<div class="clearfix"></div>

		<%- include('components/common-js') %>

		<!-- Pages JS -->
		
		<script>
		$("#projectName").change(function(){
			var AuthorName = $(this).find("option:selected").attr('data-Author');
			
			$('#teacherName').val(AuthorName);
			//ajax
		});
		$("#number").bind("input propertychange",function(){
			var MemberID = $(this).val();
			$.ajax({ 
				  url: '/teacher/check_tea', 
				  type: 'POST', 
				  data: {
				  	MemberID:MemberID
				  }, 

				  success: function (num) { 
				  	if(num.num == 0){
				  		$('.tijiao').show();
				  		$('#name').removeAttr('disabled');
				  		$('#name').val('');
				  		$('#name').attr('placeholder','新建教师');

				  	}else if(num.num == 1){
				  		$('#name').val("工号已存在，不允许重复添加");
				  		$('#name').attr('disabled','disabled')
				  		$('.tijiao').hide();
				  	}else{
				  		alert('error');
				  	}
				  }, 
				  error: function (returndata) { 
				  	// console.log(returndata);
				  } 
			 });

		});

			function addNewTeacher(){
				
				var name=document.getElementById("name").value;
				if(name==""){
					alert("姓名不能为空！");
					return;
				}
				var number=document.getElementById("number").value;
				if(number==""){
					alert("工号不能为空！");
					return;
				}

				var url="/teacher/add"
				var data={
					"name":name,
					"number":number
				};

				$.ajax({ 
				  url: url, 
				  type: 'POST', 
				  data: data, 

				  success: function (returndata) { 
				  	alert('操作成功');
				  	location.href = "/teacher/list";
					
					

				  }, 
				  error: function (returndata) { 
					  alert("提交失败！"); 
				  } 
			 });
			}
			</script>
		<!-- end: JavaScript-->

		
	</body>
	
</html>